<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Test Sepay QR</title>
</head>
<body>
<h2>Generate Sepay QR</h2>
<form id="qrForm" onsubmit="event.preventDefault(); generateQr();">
    <label>Account (acc):</label>
    <input type="text" id="acc" value="0393806942" required><br><br>

    <label>Bank:</label>
    <input type="text" id="bank" value="MBBank" required><br><br>

    <label>Amount (VNƒê):</label>
    <input type="number" id="amount" value="100000" required><br><br>

    <label>Description (des):</label>
    <input type="text" id="des" value="ung ho quy bao tro tre em" required><br><br>

    <button type="submit">Generate QR Link</button>
    <button type="button" onclick="openQrInSameTab()">Open in same tab</button>
</form>

<script>
function buildSepayUrl(acc, bank, amount, des) {
    const params = new URLSearchParams();
    if (acc) params.set('acc', acc);
    if (bank) params.set('bank', bank);
    if (amount) params.set('amount', amount);
    if (des) params.set('des', des);
    return 'https://qr.sepay.vn/img?' + params.toString();
}

function generateQr() {
    const acc = document.getElementById('acc').value.trim();
    const bank = document.getElementById('bank').value.trim();
    const amount = document.getElementById('amount').value;
    const des = document.getElementById('des').value.trim();
    const url = buildSepayUrl(acc, bank, amount, des);
    window.open(url, '_blank');
}

function openQrInSameTab() {
    const acc = document.getElementById('acc').value.trim();
    const bank = document.getElementById('bank').value.trim();
    const amount = document.getElementById('amount').value;
    const des = document.getElementById('des').value.trim();
    const url = buildSepayUrl(acc, bank, amount, des);
    window.location.href = url;
}
</script>
</body>
</html>
